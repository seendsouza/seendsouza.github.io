---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const posts = [...(await getCollection("blog"))];

  const sortedPosts = posts.sort(
    (a, b) => b.data.publishDate.getTime() - a.data.publishDate.getTime(),
  );
  return sortedPosts.map((post) => {
    return {
      params: {
        slug: post.slug,
      },
    };
  });
}
const allPosts = await getCollection("blog");
---

<BaseLayout title={"Blog | Sean D'Souza"}>
  <main>
    <ul>
      {
        allPosts.map((post) => (
          <li>
            <a href={`/blog/${post.slug}`} >{post.data.title}</a>
          </li>
        ))
      }
    </ul>
  </main>
</BaseLayout>
